var path = require('path'),
	cliUtil = require('../util');


var MODEL_TEMPLATE = [
	'/**',
	' * A struct/model builder for use with the webcore MVC architecture. Invoke create() to',
	' * build a {model} model optionally initialized with any defined values. NOTE: Use of [gs]etters', 
	' * (as opposed to instances with a custom prototype). For some implementations this could be ',
	' * built out to using the module pattern.',
	' */',
	'module.exports.create = function {model}() {',
	'	\'use strict\';',
	'',
	'	return {};',
	'',
	'};'
].join(cliUtil.eol);

function initialCaps(name) {
	return name.charAt(0).toUpperCase() + name.substring(1);
}

module.exports = {
	generate: function(name) {
		var filename = name + 'Model',
			destination = path.join(process.cwd(), 'mvc', 'model');

		cliUtil.mkdir(destination, function(dir) {
			var dest = path.join(dir, filename + '.js');
			cliUtil.write(dest, MODEL_TEMPLATE.replace(/\{model\}/g, initialCaps(name)));
		});
	}

};
