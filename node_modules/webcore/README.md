# node-webcore

Easily get started developing a node-based web application. Use node-webcore
to generate a pre-configured application in a location you specify.

node-webcore is powered by the following libraries:
- express (http://expressjs.com/)
- nconf (https://github.com/flatiron/nconf#readme)
- dustjs (http://akdubya.github.com/dustjs/, https://github.com/linkedin/dustjs#readme)
- less (http://lesscss.org/)
- async (https://github.com/caolan/async/#readme)


## Getting Started

To create and run a barebones webcore-based application, install node-webcore
and use it to create a new application. Then install the application's
dependencies.

``` bash
	$ [sudo] npm install -g git://github.paypal.com/CoreUIE/node-webcore.git#v0.1.3
	$ webcore create <dir>
	$ cd <dir> && npm install
```

Then, start the new application:

``` bash
	$ npm start
```

Now browse to `http://localhost:8000/` to view the application.


## Tests

TODO

## Routes

Routes are specified in controllers which are located in the `mvc/controllers`
directory. A controller must export a `route` method that accepts the server as
its only argument. Any middleware pertaining to this controller should be
defined in the same file. Get more information on routes and middleware at
http://expressjs.com/guide.html#route-middleware.

``` js
exports = module.exports = function(server) {

	/**
	 * The route that services the path '/foo'
	 * @param {Object} req the HTTP request object
	 * @param {Object} res the HTTP response object
	 */
	server.get('/foo', function(req, res) {
		res.send('Hello, world');
	});

	// ...

};
```

## Resources

Static resources (JavaScript, CSS/LESS, Dust templates, images, etc.) reside in
`public/{js,css,templates,img}`, and are acessible directly like
`http://localhost:8000/js/main.js`.

At development-time, `.less` files are compiled on-the-fly and immediately
available using the `.css` extension.

If there are `.less` files that you do not want automatically compiled, begin
the filename or a sub-directory name with an underscore
(e.g., `_include/stuff.less` or `_things.less`);

TODO: Complete

## Configuration
### Setting the environment

To set the runtime environment (e.g., 'development', 'staging', 'production'),
specify a `NODE_ENV` environment variable before starting the application.

``` bash
$ export NODE_ENV=production 
$ npm start
```

TODO: Complete

## Developing

The following information is only useful if you wish to contribute directly to
node-webcore.

Fork & clone the git repo, then `npm link` it. `npm link` installs development
dependencies, adds the `webcore` module to the global `node_modules`
directory, and adds the `webcore` binary to your path. Any changes made to your
local repo are automatically reflected in both places.

``` bash
# First, fork from https://github.paypal.com/CoreUIE/node-webcore. Then:
$ git clone git://github.paypal.com/<YOU>/node-webcore.git
$ cd node-webcore
$ npm link
```

### Test Applications

If you generate a test application during development, the setup process is
slightly different. You should `npm link webcore` before `npm install`. This
ensures your application is using your local repo rather than cloning webcore
from GitHub. This way, any changes you make to your local webcore repo will
appear automatically in your test app.

``` bash
$ webcore create <dir>
$ cd <dir>
$ npm link webcore # Important!
$ npm install
$ npm start
```
